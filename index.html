<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hemophilia Factor VIII Priority Countries Dashboard</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/plotly.js/2.26.0/plotly.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f7fa;
            color: #333;
        }
        
        .header {
            text-align: center;
            background: linear-gradient(135deg, #1f4e79, #2d5aa0);
            color: white;
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        .header h1 {
            margin: 0;
            font-size: 2.5em;
            font-weight: 300;
        }
        
        .header p {
            margin: 10px 0 0 0;
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .strategic-overview {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            border-left: 5px solid #1f4e79;
        }
        
        .strategic-overview h2 {
            color: #1f4e79;
            margin-top: 0;
            font-size: 1.8em;
        }
        
        .strategic-overview h3 {
            color: #2d5aa0;
            margin-top: 20px;
            font-size: 1.3em;
        }
        
        .strategic-overview ul {
            line-height: 1.8;
        }
        
        .strategic-overview strong {
            color: #1f4e79;
        }
        
        .dashboard-container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .summary-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            text-align: center;
        }
        
        .card h3 {
            margin: 0 0 10px 0;
            color: #1f4e79;
            font-size: 1.1em;
        }
        
        .card .number {
            font-size: 2.5em;
            font-weight: bold;
            color: #d62728;
            margin: 10px 0;
        }
        
        .chart-container {
            background: white;
            margin: 20px 0;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .chart-title {
            font-size: 1.4em;
            font-weight: bold;
            color: #1f4e79;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .controls {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            align-items: center;
            justify-content: center;
        }
        
        .controls label {
            font-weight: bold;
            color: #1f4e79;
        }
        
        .controls select, .controls input {
            padding: 8px 12px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
        }
        
        .controls select:focus, .controls input:focus {
            outline: none;
            border-color: #1f4e79;
        }
        
        .table-container {
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
            margin: 20px 0;
        }
        
        .table-header {
            background: #1f4e79;
            color: white;
            padding: 20px;
            text-align: center;
        }
        
        .table-header h2 {
            margin: 0;
        }
        
        .table-controls {
            padding: 15px;
            background: #f8f9fa;
            border-bottom: 1px solid #dee2e6;
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .table-scroll {
            max-height: 600px;
            overflow-y: auto;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        th {
            background: #f8f9fa;
            padding: 12px 8px;
            text-align: left;
            font-weight: bold;
            color: #1f4e79;
            border-bottom: 2px solid #dee2e6;
            position: sticky;
            top: 0;
            z-index: 1;
            cursor: pointer;
            user-select: none;
        }
        
        th:hover {
            background: #e9ecef;
        }
        
        th.sort-asc::after {
            content: " ↑";
            color: #1f4e79;
        }
        
        th.sort-desc::after {
            content: " ↓";
            color: #1f4e79;
        }
        
        td {
            padding: 10px 8px;
            border-bottom: 1px solid #dee2e6;
            font-size: 0.9em;
        }
        
        .priority-score {
            font-weight: bold;
        }
        
        .priority-very-high { color: #8B0000; background-color: #FFE4E1; }
        .priority-high { color: #FF4500; background-color: #FFF8DC; }
        .priority-medium { color: #DAA520; background-color: #FFFACD; }
        .priority-low { color: #228B22; background-color: #F0FFF0; }
        
        /* Need category colors based on FVIII per capita */
        .need-very-high { background-color: #8B0000; color: white; }
        .need-high { background-color: #CD853F; color: white; }
        .need-medium { background-color: #DAA520; color: white; }
        .need-low { background-color: #9ACD32; color: black; }
        
        .methodology {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-top: 30px;
        }
        
        .methodology h3 {
            color: #1f4e79;
            margin-top: 0;
        }
        
        .legend {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 15px 0;
            flex-wrap: wrap;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.9em;
        }
        
        .legend-color {
            width: 15px;
            height: 15px;
            border-radius: 3px;
        }
        
        .priority-countries-section {
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin: 30px 0;
            overflow: hidden;
        }
        
        .priority-countries-header {
            background: #8B4513;
            color: white;
            padding: 20px;
            text-align: center;
        }
        
        .priority-countries-header h2 {
            margin: 0 0 10px 0;
        }
        
        .priority-countries-header p {
            margin: 0;
            opacity: 0.9;
            font-size: 1em;
        }
        
        @media (max-width: 768px) {
            .controls {
                flex-direction: column;
                align-items: stretch;
            }
            
            .controls select, .controls input {
                width: 100%;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .header p {
                font-size: 1em;
            }
            
            .table-controls {
                flex-direction: column;
                align-items: stretch;
            }
        }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <div class="header">
            <h1>Hemophilia Factor VIII Prioritization Dashboard</h1>
            <p>Research and Analysis | Direct Relief</p>
        </div>
        
        <div class="strategic-overview">
            <h2>How to Use This Dashboard</h2>
            
            <p>This dashboard is intended to help Direct Relief plan strategically around the provision of <a href="https://www.cdc.gov/hemophilia/treatment/index.html" target="_blank">Factor VIII for hemophilia</a>, along with the <a href="https://experience.arcgis.com/experience/ff25ff2e304c446ca574a24e52d83966" target="_blank">maps provided here</a>.</p>
            
            <p>This dashboard prioritizes countries for FVIII donations based on three weighted factors:</p>
            <ul>
                <li><strong>Medical Need (70% weight):</strong> Countries with lower Factor VIII per capita availability receive higher priority.</li>
                <li><strong>WFH Aid Gap (20% weight):</strong> Countries receiving less humanitarian FVIII support from WFH are prioritized, as these represent opportunities where Direct Relief can make a more compelling case for support when engaging manufacturers already supporting WFH</li>
                <li><strong>Direct Relief Support History (10% weight):</strong> Countries with less past Direct Relief FVIII support are prioritized to expand geographic reach and distribution across the partner network</li>
            </ul>
            
            <p>In addition, a full list of Global South countries not receiving any FVIII from WFH is included to help identify target countries for engaging FVIII manufacturers around donation programs.</p>
            
            <p style="font-size: 0.85em; color: #666; margin-top: 20px;">
                <em>Hemophilia data from <a href="https://www1.wfh.org/publications/files/pdf-2525.pdf?_gl=1*1n8abe1*_ga_7974KH9LH5*czE3NDc2OTAxODEkbzEkZzEkdDE3NDc2OTAxODgkajAkbDAkaDA." target="_blank">WFH Survey 2023</a>. Direct Relief shipment value in USD accounts for shipments sent since beginning of dataset in 2008 through March 2025.</em>
            </p>
        </div>
        
        <div class="summary-cards" id="summaryCards">
            <!-- Summary cards will be populated by JavaScript -->
        </div>
        
        <div class="chart-container">
            <div class="chart-title">Interactive 3D Priority Mapping</div>
            <div class="legend">
                <div class="legend-item">
                    <div class="legend-color" style="background: #8B0000;"></div>
                    <span>Very High Priority (90-100)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #FF4500;"></div>
                    <span>High Priority (70-90)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #DAA520;"></div>
                    <span>Medium Priority (50-70)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #228B22;"></div>
                    <span>Low Priority (&lt;50)</span>
                </div>
            </div>
            <div class="controls">
                <label for="viewSelect">View:</label>
                <select id="viewSelect">
                    <option value="3d">3D Interactive</option>
                    <option value="need-aid">Need vs Aid</option>
                    <option value="need-dr">Need vs DR Donations</option>
                    <option value="aid-dr">Aid vs DR Donations</option>
                </select>
                
                <label for="priorityFilter">Priority Filter:</label>
                <select id="priorityFilter">
                    <option value="all">All Countries & Territories</option>
                    <option value="very-high">Very High Priority (90+)</option>
                    <option value="high">High Priority (70-90)</option>
                    <option value="medium">Medium Priority (50-70)</option>
                    <option value="low">Low Priority (&lt;50)</option>
                </select>
                
                <label for="searchCountry">Search:</label>
                <input type="text" id="searchCountry" placeholder="Type country/territory name...">
            </div>
            <div id="mainChart" style="height: 600px;"></div>
        </div>
        
        <div class="chart-container">
            <div class="chart-title">Priority Distribution & Top Countries and Territories</div>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                <div id="distributionChart" style="height: 400px;"></div>
                <div id="topCountriesChart" style="height: 400px;"></div>
            </div>
        </div>
        
        <div class="table-container">
            <div class="table-header">
                <h2>Complete Priority Rankings</h2>
            </div>
            <div class="table-controls">
                <label for="tableSearch">Search Table:</label>
                <input type="text" id="tableSearch" placeholder="Filter countries/territories...">
                
                <label for="tableLimit">Show:</label>
                <select id="tableLimit">
                    <option value="25">Top 25</option>
                    <option value="50">Top 50</option>
                    <option value="100">Top 100</option>
                    <option value="all">All Countries & Territories</option>
                </select>
                
                <label for="tablePriority">Filter by Priority:</label>
                <select id="tablePriority">
                    <option value="all">All Priorities</option>
                    <option value="very-high">Very High (90+)</option>
                    <option value="high">High (70-90)</option>
                    <option value="medium">Medium (50-70)</option>
                    <option value="low">Low (&lt;50)</option>
                </select>
                
                <button id="downloadMainTableCSV" style="padding: 8px 16px; background: #1f4e79; color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: bold;">
                    Download CSV
                </button>
            </div>
            <div class="table-scroll">
                <table id="priorityTable">
                    <thead>
                        <tr>
                            <th data-sort="rank">Rank</th>
                            <th data-sort="country">Country/Territory</th>
                            <th data-sort="priorityScore">Priority Score</th>
                            <th data-sort="needCategory">Need Category</th>
                            <th data-sort="factorVIII">Factor VIII Per Capita</th>
                            <th data-sort="humanitarianAid">Humanitarian Aid (IU)</th>
                            <th data-sort="drDonations">DR Donations (USD)</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody">
                        <!-- Table rows will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>
        
        <div class="priority-countries-section">
            <div class="priority-countries-header">
                <h2>Countries Not Receiving Any FVIII from WFH</h2>
                <p>Countries with no current WFH humanitarian aid that have low Factor VIII availability or likely poor access based on development status</p>
            </div>
            <div class="table-controls">
                <label for="regionFilter">Filter by Region:</label>
                <select id="regionFilter">
                    <option value="all">All Regions</option>
                    <option value="Sub-Saharan Africa">Sub-Saharan Africa</option>
                    <option value="South & Southeast Asia">South & Southeast Asia</option>
                    <option value="Middle East & North Africa">Middle East & North Africa</option>
                    <option value="Latin America & Caribbean">Latin America & Caribbean</option>
                    <option value="East Asia & Pacific">East Asia & Pacific</option>
                    <option value="Eastern Europe & Central Asia">Eastern Europe & Central Asia</option>
                    <option value="Europe (Other)">Europe (Other)</option>
                </select>
                
                <label for="priorityCountriesSearch">Search:</label>
                <input type="text" id="priorityCountriesSearch" placeholder="Filter countries...">
                
                <button id="downloadPriorityCountriesCSV" style="padding: 8px 16px; background: #8B4513; color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: bold;">
                    Download CSV
                </button>
            </div>
            <div class="table-scroll">
                <table id="priorityCountriesTable">
                    <thead>
                        <tr>
                            <th>Region</th>
                            <th>Country</th>
                            <th>FVIII Per Capita</th>
                            <th>Humanitarian Aid Status</th>
                        </tr>
                    </thead>
                    <tbody id="priorityCountriesTableBody">
                        <!-- Priority countries table rows will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>
        
    </div>

    <script>
        // Real data from analysis - maintaining all original data
        const globalData = [
        {
                "rank": 1,
                "country": "Democratic Republic of the Congo",
                "priorityScore": 99.5,
                "factorVIII": 0.01,
                "humanitarianAid": 0,
                "drDonations": 0.0,
                "needScore": 99.3,
                "lowAidScore": 100.0,
                "lowDRScore": 99.9
        },
        {
                "rank": 2,
                "country": "Sierra Leone",
                "priorityScore": 96.6,
                "factorVIII": 0.01,
                "humanitarianAid": 100000,
                "drDonations": 0.0,
                "needScore": 99.3,
                "lowAidScore": 85.5,
                "lowDRScore": 99.9
        },
        {
                "rank": 3,
                "country": "Burundi",
                "priorityScore": 95.3,
                "factorVIII": 0.02,
                "humanitarianAid": 225000,
                "drDonations": 0.0,
                "needScore": 98.6,
                "lowAidScore": 81.5,
                "lowDRScore": 100.0
        },
        {
                "rank": 4,
                "country": "Sudan",
                "priorityScore": 95.1,
                "factorVIII": 0.01,
                "humanitarianAid": 400000,
                "drDonations": 0.0,
                "needScore": 99.3,
                "lowAidScore": 78.0,
                "lowDRScore": 99.9
        },
        {
                "rank": 5,
                "country": "Guinea",
                "priorityScore": 95.0,
                "factorVIII": 0.02,
                "humanitarianAid": 300000,
                "drDonations": 0.0,
                "needScore": 98.6,
                "lowAidScore": 79.9,
                "lowDRScore": 99.9
        },
        {
                "rank": 6,
                "country": "Gambia",
                "priorityScore": 94.8,
                "factorVIII": 0.11,
                "humanitarianAid": 0,
                "drDonations": 0.0,
                "needScore": 92.6,
                "lowAidScore": 100.0,
                "lowDRScore": 99.9
        },
        {
                "rank": 7,
                "country": "Togo",
                "priorityScore": 94.7,
                "factorVIII": 0.03,
                "humanitarianAid": 250000,
                "drDonations": 0.0,
                "needScore": 97.9,
                "lowAidScore": 80.9,
                "lowDRScore": 99.9
        },
        {
                "rank": 8,
                "country": "Cameroon",
                "priorityScore": 91.3,
                "factorVIII": 0.05,
                "humanitarianAid": 1330000,
                "drDonations": 0.0,
                "needScore": 96.6,
                "lowAidScore": 68.5,
                "lowDRScore": 99.9
        },
        {
                "rank": 9,
                "country": "Ivory Coast",
                "priorityScore": 91.0,
                "factorVIII": 0.05,
                "humanitarianAid": 1582000,
                "drDonations": 0.0,
                "needScore": 96.6,
                "lowAidScore": 66.8,
                "lowDRScore": 99.9
        },
        {
                "rank": 10,
                "country": "Senegal",
                "priorityScore": 90.8,
                "factorVIII": 0.06,
                "humanitarianAid": 1367000,
                "drDonations": 0.0,
                "needScore": 95.9,
                "lowAidScore": 68.2,
                "lowDRScore": 99.9
        },
        {
                "rank": 11,
                "country": "Eritrea",
                "priorityScore": 90.4,
                "factorVIII": 0.11,
                "humanitarianAid": 400000,
                "drDonations": 0.0,
                "needScore": 92.6,
                "lowAidScore": 78.0,
                "lowDRScore": 99.9
        },
        {
                "rank": 12,
                "country": "Ethiopia",
                "priorityScore": 90.2,
                "factorVIII": 0.03,
                "humanitarianAid": 3400000,
                "drDonations": 0.0,
                "needScore": 97.9,
                "lowAidScore": 58.3,
                "lowDRScore": 99.9
        },
        {
                "rank": 13,
                "country": "Kenya",
                "priorityScore": 89.9,
                "factorVIII": 0.05,
                "humanitarianAid": 2528500,
                "drDonations": 0.0,
                "needScore": 96.6,
                "lowAidScore": 61.8,
                "lowDRScore": 99.9
        },
        {
                "rank": 14,
                "country": "Mali",
                "priorityScore": 89.3,
                "factorVIII": 0.08,
                "humanitarianAid": 1800000,
                "drDonations": 0.0,
                "needScore": 94.6,
                "lowAidScore": 65.5,
                "lowDRScore": 99.9
        },
        {
                "rank": 15,
                "country": "Lesotho",
                "priorityScore": 89.2,
                "factorVIII": 0.24,
                "humanitarianAid": 0,
                "drDonations": 0.0,
                "needScore": 84.5,
                "lowAidScore": 100.0,
                "lowDRScore": 99.9
        },
        {
                "rank": 16,
                "country": "Rwanda",
                "priorityScore": 88.7,
                "factorVIII": 0.13,
                "humanitarianAid": 720000,
                "drDonations": 0.0,
                "needScore": 91.3,
                "lowAidScore": 73.8,
                "lowDRScore": 99.9
        },
        {
                "rank": 17,
                "country": "Zambia",
                "priorityScore": 88.7,
                "factorVIII": 0.09,
                "humanitarianAid": 1950000,
                "drDonations": 0.0,
                "needScore": 93.9,
                "lowAidScore": 64.7,
                "lowDRScore": 99.9
        },
        {
                "rank": 18,
                "country": "Nigeria",
                "priorityScore": 88.6,
                "factorVIII": 0.03,
                "humanitarianAid": 6173000,
                "drDonations": 0.0,
                "needScore": 97.9,
                "lowAidScore": 50.1,
                "lowDRScore": 99.9
        },
        {
                "rank": 19,
                "country": "Ghana",
                "priorityScore": 88.4,
                "factorVIII": 0.04,
                "humanitarianAid": 1455600,
                "drDonations": 661125.0,
                "needScore": 97.2,
                "lowAidScore": 67.6,
                "lowDRScore": 68.2
        },
        {
                "rank": 20,
                "country": "Bolivia",
                "priorityScore": 88.1,
                "factorVIII": 0.14,
                "humanitarianAid": 770000,
                "drDonations": 0.0,
                "needScore": 90.7,
                "lowAidScore": 73.3,
                "lowDRScore": 99.9
        },
        {
                "rank": 21,
                "country": "Philippines",
                "priorityScore": 88.1,
                "factorVIII": 0.06,
                "humanitarianAid": 4435919,
                "drDonations": 0.0,
                "needScore": 95.9,
                "lowAidScore": 54.8,
                "lowDRScore": 99.9
        },
        {
                "rank": 22,
                "country": "Bangladesh",
                "priorityScore": 87.4,
                "factorVIII": 0.05,
                "humanitarianAid": 6650000,
                "drDonations": 0.0,
                "needScore": 96.6,
                "lowAidScore": 49.0,
                "lowDRScore": 100.0
        },
        {
                "rank": 23,
                "country": "Madagascar",
                "priorityScore": 87.1,
                "factorVIII": 0.1,
                "humanitarianAid": 3105000,
                "drDonations": 0.0,
                "needScore": 93.2,
                "lowAidScore": 59.4,
                "lowDRScore": 99.9
        },
        {
                "rank": 24,
                "country": "Myanmar",
                "priorityScore": 87.0,
                "factorVIII": 0.1,
                "humanitarianAid": 3300000,
                "drDonations": 0.0,
                "needScore": 93.2,
                "lowAidScore": 58.6,
                "lowDRScore": 99.9
        },
        {
                "rank": 25,
                "country": "Pakistan",
                "priorityScore": 86.8,
                "factorVIII": 0.04,
                "humanitarianAid": 9351000,
                "drDonations": 0.0,
                "needScore": 97.2,
                "lowAidScore": 43.5,
                "lowDRScore": 99.9
        },
        {
                "rank": 26,
                "country": "Djibouti",
                "priorityScore": 84.3,
                "factorVIII": 0.26,
                "humanitarianAid": 294500,
                "drDonations": 0.0,
                "needScore": 83.4,
                "lowAidScore": 80.0,
                "lowDRScore": 99.9
        },
        {
                "rank": 27,
                "country": "Uganda",
                "priorityScore": 84.2,
                "factorVIII": 0.06,
                "humanitarianAid": 2847500,
                "drDonations": 2939900.0,
                "needScore": 95.9,
                "lowAidScore": 60.4,
                "lowDRScore": 50.2
        },
        {
                "rank": 28,
                "country": "Cambodia",
                "priorityScore": 83.4,
                "factorVIII": 0.11,
                "humanitarianAid": 1140000,
                "drDonations": 3907010.0,
                "needScore": 92.6,
                "lowAidScore": 69.9,
                "lowDRScore": 45.7
        },
        {
                "rank": 29,
                "country": "Uzbekistan",
                "priorityScore": 81.5,
                "factorVIII": 0.2,
                "humanitarianAid": 4972750,
                "drDonations": 0.0,
                "needScore": 86.9,
                "lowAidScore": 53.2,
                "lowDRScore": 99.9
        },
        {
                "rank": 30,
                "country": "Malawi",
                "priorityScore": 81.4,
                "factorVIII": 0.07,
                "humanitarianAid": 1470000,
                "drDonations": 19498832.5,
                "needScore": 95.2,
                "lowAidScore": 67.5,
                "lowDRScore": 12.1
        },
        {
                "rank": 31,
                "country": "Vietnam",
                "priorityScore": 80.9,
                "factorVIII": 0.29,
                "humanitarianAid": 1250000,
                "drDonations": 0.0,
                "needScore": 81.6,
                "lowAidScore": 69.1,
                "lowDRScore": 99.9
        },
        {
                "rank": 32,
                "country": "Botswana",
                "priorityScore": 80.2,
                "factorVIII": 0.28,
                "humanitarianAid": 750000,
                "drDonations": 146250.0,
                "needScore": 82.2,
                "lowAidScore": 73.5,
                "lowDRScore": 79.8
        },
        {
                "rank": 33,
                "country": "Indonesia",
                "priorityScore": 79.1,
                "factorVIII": 0.28,
                "humanitarianAid": 3528000,
                "drDonations": 0.0,
                "needScore": 82.2,
                "lowAidScore": 57.8,
                "lowDRScore": 99.9
        },
        {
                "rank": 34,
                "country": "The Bahamas",
                "priorityScore": 78.4,
                "factorVIII": 0.43,
                "humanitarianAid": 175500,
                "drDonations": 0.0,
                "needScore": 74.0,
                "lowAidScore": 82.8,
                "lowDRScore": 100.0
        },
        {
                "rank": 35,
                "country": "Cuba",
                "priorityScore": 76.1,
                "factorVIII": 0.39,
                "humanitarianAid": 2009000,
                "drDonations": 0.0,
                "needScore": 76.1,
                "lowAidScore": 64.4,
                "lowDRScore": 99.9
        },
        {
                "rank": 36,
                "country": "Honduras",
                "priorityScore": 74.4,
                "factorVIII": 0.35,
                "humanitarianAid": 2860000,
                "drDonations": 287700.0,
                "needScore": 78.3,
                "lowAidScore": 60.4,
                "lowDRScore": 75.2
        },
        {
                "rank": 37,
                "country": "Nepal",
                "priorityScore": 73.2,
                "factorVIII": 0.19,
                "humanitarianAid": 4926000,
                "drDonations": 19148125.0,
                "needScore": 87.5,
                "lowAidScore": 53.3,
                "lowDRScore": 12.6
        },
        {
                "rank": 38,
                "country": "Dominican Republic",
                "priorityScore": 72.1,
                "factorVIII": 0.31,
                "humanitarianAid": 1850000,
                "drDonations": 10676678.0,
                "needScore": 80.5,
                "lowAidScore": 65.2,
                "lowDRScore": 26.7
        },
        {
                "rank": 39,
                "country": "Mauritania",
                "priorityScore": 70.6,
                "factorVIII": 0.53,
                "humanitarianAid": 2579500,
                "drDonations": 0.0,
                "needScore": 69.0,
                "lowAidScore": 61.6,
                "lowDRScore": 99.9
        },
        {
                "rank": 40,
                "country": "Trinidad and Tobago",
                "priorityScore": 69.7,
                "factorVIII": 0.62,
                "humanitarianAid": 950000,
                "drDonations": 0.0,
                "needScore": 64.8,
                "lowAidScore": 71.5,
                "lowDRScore": 99.9
        },
        {
                "rank": 41,
                "country": "India",
                "priorityScore": 69.4,
                "factorVIII": 0.15,
                "humanitarianAid": 39029000,
                "drDonations": 6358000.0,
                "needScore": 90.0,
                "lowAidScore": 13.2,
                "lowDRScore": 37.2
        },
        {
                "rank": 42,
                "country": "South Africa",
                "priorityScore": 62.2,
                "factorVIII": 1.11,
                "humanitarianAid": 0,
                "drDonations": 0.0,
                "needScore": 46.0,
                "lowAidScore": 100.0,
                "lowDRScore": 99.9
        },
        {
                "rank": 43,
                "country": "Morocco",
                "priorityScore": 58.5,
                "factorVIII": 0.84,
                "humanitarianAid": 7010000,
                "drDonations": 0.0,
                "needScore": 55.5,
                "lowAidScore": 48.1,
                "lowDRScore": 99.9
        },
        {
                "rank": 44,
                "country": "Iraq",
                "priorityScore": 58.2,
                "factorVIII": 0.88,
                "humanitarianAid": 0,
                "drDonations": 26590510.0,
                "needScore": 54.0,
                "lowAidScore": 100.0,
                "lowDRScore": 3.6
        },
        {
                "rank": 45,
                "country": "Jordan",
                "priorityScore": 58.0,
                "factorVIII": 1.31,
                "humanitarianAid": 0,
                "drDonations": 0.0,
                "needScore": 40.0,
                "lowAidScore": 100.0,
                "lowDRScore": 99.9
        },
        {
                "rank": 46,
                "country": "Syria",
                "priorityScore": 57.1,
                "factorVIII": 0.54,
                "humanitarianAid": 12478500,
                "drDonations": 17812980.0,
                "needScore": 68.5,
                "lowAidScore": 38.3,
                "lowDRScore": 14.5
        },
        {
                "rank": 47,
                "country": "Mongolia",
                "priorityScore": 54.9,
                "factorVIII": 1.16,
                "humanitarianAid": 1250000,
                "drDonations": 0.0,
                "needScore": 44.4,
                "lowAidScore": 69.1,
                "lowDRScore": 99.9
        },
        {
                "rank": 48,
                "country": "Belize",
                "priorityScore": 54.0,
                "factorVIII": 1.3,
                "humanitarianAid": 330000,
                "drDonations": 0.0,
                "needScore": 40.3,
                "lowAidScore": 79.3,
                "lowDRScore": 99.9
        },
        {
                "rank": 49,
                "country": "Guyana",
                "priorityScore": 50.8,
                "factorVIII": 1.37,
                "humanitarianAid": 1117000,
                "drDonations": 0.0,
                "needScore": 38.3,
                "lowAidScore": 70.1,
                "lowDRScore": 99.9
        },
        {
                "rank": 50,
                "country": "Sri Lanka",
                "priorityScore": 50.2,
                "factorVIII": 1.07,
                "humanitarianAid": 5148000,
                "drDonations": 832802.5,
                "needScore": 47.3,
                "lowAidScore": 52.7,
                "lowDRScore": 65.9
        },
        {
                "rank": 51,
                "country": "Tunisia",
                "priorityScore": 46.9,
                "factorVIII": 2.03,
                "humanitarianAid": 0,
                "drDonations": 0.0,
                "needScore": 24.1,
                "lowAidScore": 100.0,
                "lowDRScore": 99.9
        },
        {
                "rank": 52,
                "country": "Suriname",
                "priorityScore": 46.5,
                "factorVIII": 1.63,
                "humanitarianAid": 1018250,
                "drDonations": 0.0,
                "needScore": 31.9,
                "lowAidScore": 70.9,
                "lowDRScore": 99.9
        },
        {
                "rank": 53,
                "country": "Kyrgyzstan",
                "priorityScore": 46.0,
                "factorVIII": 1.46,
                "humanitarianAid": 4651750,
                "drDonations": 0.0,
                "needScore": 36.0,
                "lowAidScore": 54.1,
                "lowDRScore": 99.9
        },
        {
                "rank": 54,
                "country": "Mauritius",
                "priorityScore": 45.5,
                "factorVIII": 1.82,
                "humanitarianAid": 300000,
                "drDonations": 0.0,
                "needScore": 28.0,
                "lowAidScore": 79.9,
                "lowDRScore": 99.9
        },
        {
                "rank": 55,
                "country": "Malaysia",
                "priorityScore": 45.4,
                "factorVIII": 2.16,
                "humanitarianAid": 0,
                "drDonations": 0.0,
                "needScore": 22.0,
                "lowAidScore": 100.0,
                "lowDRScore": 99.9
        },
        {
                "rank": 56,
                "country": "Uruguay",
                "priorityScore": 42.2,
                "factorVIII": 2.49,
                "humanitarianAid": 0,
                "drDonations": 0.0,
                "needScore": 17.5,
                "lowAidScore": 100.0,
                "lowDRScore": 99.9
        },
        {
                "rank": 57,
                "country": "Egypt",
                "priorityScore": 41.9,
                "factorVIII": 1.39,
                "humanitarianAid": 21743750,
                "drDonations": 0.0,
                "needScore": 37.8,
                "lowAidScore": 27.2,
                "lowDRScore": 99.9
        },
        {
                "rank": 58,
                "country": "Mexico",
                "priorityScore": 41.7,
                "factorVIII": 2.56,
                "humanitarianAid": 0,
                "drDonations": 0.0,
                "needScore": 16.7,
                "lowAidScore": 100.0,
                "lowDRScore": 99.9
        },
        {
                "rank": 59,
                "country": "Venezuela",
                "priorityScore": 41.6,
                "factorVIII": 1.22,
                "humanitarianAid": 10880000,
                "drDonations": 6829300.0,
                "needScore": 42.6,
                "lowAidScore": 40.8,
                "lowDRScore": 35.9
        },
        {
                "rank": 60,
                "country": "Lebanon",
                "priorityScore": 41.4,
                "factorVIII": 1.3,
                "humanitarianAid": 4814000,
                "drDonations": 11525080.0,
                "needScore": 40.3,
                "lowAidScore": 53.7,
                "lowDRScore": 24.9
        },
        {
                "rank": 61,
                "country": "Netherlands",
                "priorityScore": 38.3,
                "factorVIII": 3.05,
                "humanitarianAid": 0,
                "drDonations": 0.0,
                "needScore": 11.8,
                "lowAidScore": 100.0,
                "lowDRScore": 99.9
        },
        {
                "rank": 62,
                "country": "El Salvador",
                "priorityScore": 38.0,
                "factorVIII": 1.25,
                "humanitarianAid": 5711500,
                "drDonations": 46320153.4,
                "needScore": 41.7,
                "lowAidScore": 51.2,
                "lowDRScore": -13.9
        },
        {
                "rank": 63,
                "country": "Algeria",
                "priorityScore": 37.7,
                "factorVIII": 3.15,
                "humanitarianAid": 0,
                "drDonations": 0.0,
                "needScore": 11.0,
                "lowAidScore": 100.0,
                "lowDRScore": 99.9
        },
        {
                "rank": 64,
                "country": "Australia",
                "priorityScore": 37.4,
                "factorVIII": 3.2,
                "humanitarianAid": 0,
                "drDonations": 0.0,
                "needScore": 10.6,
                "lowAidScore": 100.0,
                "lowDRScore": 100.0
        },
        {
                "rank": 65,
                "country": "Singapore",
                "priorityScore": 37.3,
                "factorVIII": 3.22,
                "humanitarianAid": 0,
                "drDonations": 0.0,
                "needScore": 10.5,
                "lowAidScore": 100.0,
                "lowDRScore": 99.9
        },
        {
                "rank": 66,
                "country": "Panama",
                "priorityScore": 34.6,
                "factorVIII": 3.89,
                "humanitarianAid": 0,
                "drDonations": 0.0,
                "needScore": 6.6,
                "lowAidScore": 100.0,
                "lowDRScore": 99.9
        },
        {
                "rank": 67,
                "country": "Portugal",
                "priorityScore": 34.4,
                "factorVIII": 3.94,
                "humanitarianAid": 0,
                "drDonations": 0.0,
                "needScore": 6.3,
                "lowAidScore": 100.0,
                "lowDRScore": 99.9
        },
        {
                "rank": 68,
                "country": "Bosnia and Herzegovina",
                "priorityScore": 34.4,
                "factorVIII": 3.95,
                "humanitarianAid": 0,
                "drDonations": 0.0,
                "needScore": 6.3,
                "lowAidScore": 100.0,
                "lowDRScore": 100.0
        },
        {
                "rank": 69,
                "country": "Armenia",
                "priorityScore": 34.3,
                "factorVIII": 1.84,
                "humanitarianAid": 3500000,
                "drDonations": 7311660.0,
                "needScore": 27.6,
                "lowAidScore": 57.9,
                "lowDRScore": 34.5
        },
        {
                "rank": 70,
                "country": "Republic of Serbia",
                "priorityScore": 33.8,
                "factorVIII": 4.16,
                "humanitarianAid": 0,
                "drDonations": 0.0,
                "needScore": 5.4,
                "lowAidScore": 100.0,
                "lowDRScore": 99.9
        },
        {
                "rank": 71,
                "country": "Romania",
                "priorityScore": 33.7,
                "factorVIII": 4.18,
                "humanitarianAid": 0,
                "drDonations": 0.0,
                "needScore": 5.4,
                "lowAidScore": 100.0,
                "lowDRScore": 99.9
        },
        {
                "rank": 72,
                "country": "Canada",
                "priorityScore": 33.6,
                "factorVIII": 4.22,
                "humanitarianAid": 0,
                "drDonations": 0.0,
                "needScore": 5.2,
                "lowAidScore": 100.0,
                "lowDRScore": 99.9
        },
        {
                "rank": 73,
                "country": "Saudi Arabia",
                "priorityScore": 32.7,
                "factorVIII": 4.65,
                "humanitarianAid": 0,
                "drDonations": 0.0,
                "needScore": 3.9,
                "lowAidScore": 100.0,
                "lowDRScore": 99.9
        },
        {
                "rank": 74,
                "country": "Latvia",
                "priorityScore": 32.6,
                "factorVIII": 4.72,
                "humanitarianAid": 0,
                "drDonations": 0.0,
                "needScore": 3.7,
                "lowAidScore": 100.0,
                "lowDRScore": 99.9
        },
        {
                "rank": 75,
                "country": "Ireland",
                "priorityScore": 32.5,
                "factorVIII": 4.75,
                "humanitarianAid": 0,
                "drDonations": 0.0,
                "needScore": 3.6,
                "lowAidScore": 100.0,
                "lowDRScore": 99.9
        },
        {
                "rank": 76,
                "country": "Belarus",
                "priorityScore": 32.5,
                "factorVIII": 4.77,
                "humanitarianAid": 0,
                "drDonations": 0.0,
                "needScore": 3.5,
                "lowAidScore": 100.0,
                "lowDRScore": 100.0
        },
        {
                "rank": 77,
                "country": "Georgia",
                "priorityScore": 32.3,
                "factorVIII": 4.86,
                "humanitarianAid": 0,
                "drDonations": 0.0,
                "needScore": 3.3,
                "lowAidScore": 100.0,
                "lowDRScore": 99.9
        },
        {
                "rank": 78,
                "country": "Chile",
                "priorityScore": 32.3,
                "factorVIII": 4.9,
                "humanitarianAid": 0,
                "drDonations": 0.0,
                "needScore": 3.2,
                "lowAidScore": 100.0,
                "lowDRScore": 99.9
        },
        {
                "rank": 79,
                "country": "Brazil",
                "priorityScore": 32.1,
                "factorVIII": 5.04,
                "humanitarianAid": 0,
                "drDonations": 0.0,
                "needScore": 2.9,
                "lowAidScore": 100.0,
                "lowDRScore": 99.9
        },
        {
                "rank": 80,
                "country": "Japan",
                "priorityScore": 31.9,
                "factorVIII": 5.12,
                "humanitarianAid": 0,
                "drDonations": 0.0,
                "needScore": 2.8,
                "lowAidScore": 100.0,
                "lowDRScore": 99.9
        },
        {
                "rank": 81,
                "country": "Switzerland",
                "priorityScore": 31.8,
                "factorVIII": 5.23,
                "humanitarianAid": 0,
                "drDonations": 0.0,
                "needScore": 2.6,
                "lowAidScore": 100.0,
                "lowDRScore": 99.9
        },
        {
                "rank": 82,
                "country": "United Kingdom",
                "priorityScore": 31.6,
                "factorVIII": 5.4,
                "humanitarianAid": 0,
                "drDonations": 0.0,
                "needScore": 2.3,
                "lowAidScore": 100.0,
                "lowDRScore": 99.9
        },
        {
                "rank": 83,
                "country": "Czech Republic",
                "priorityScore": 31.0,
                "factorVIII": 6.09,
                "humanitarianAid": 0,
                "drDonations": 0.0,
                "needScore": 1.4,
                "lowAidScore": 100.0,
                "lowDRScore": 99.9
        },
        {
                "rank": 84,
                "country": "Greece",
                "priorityScore": 30.9,
                "factorVIII": 6.16,
                "humanitarianAid": 0,
                "drDonations": 0.0,
                "needScore": 1.3,
                "lowAidScore": 100.0,
                "lowDRScore": 99.9
        },
        {
                "rank": 85,
                "country": "Finland",
                "priorityScore": 30.9,
                "factorVIII": 6.18,
                "humanitarianAid": 0,
                "drDonations": 0.0,
                "needScore": 1.3,
                "lowAidScore": 100.0,
                "lowDRScore": 99.9
        },
        {
                "rank": 86,
                "country": "Palestine",
                "priorityScore": 30.7,
                "factorVIII": 2.69,
                "humanitarianAid": 950000,
                "drDonations": 1750680.0,
                "needScore": 15.2,
                "lowAidScore": 71.5,
                "lowDRScore": 57.4
        },
        {
                "rank": 87,
                "country": "Colombia",
                "priorityScore": 30.5,
                "factorVIII": 4.56,
                "humanitarianAid": 50000,
                "drDonations": 0.0,
                "needScore": 4.1,
                "lowAidScore": 88.2,
                "lowDRScore": 99.9
        },
        {
                "rank": 88,
                "country": "Sweden",
                "priorityScore": 30.2,
                "factorVIII": 8.15,
                "humanitarianAid": 0,
                "drDonations": 0.0,
                "needScore": 0.3,
                "lowAidScore": 100.0,
                "lowDRScore": 99.9
        },
        {
                "rank": 89,
                "country": "Germany",
                "priorityScore": 30.2,
                "factorVIII": 8.55,
                "humanitarianAid": 0,
                "drDonations": 0.0,
                "needScore": 0.3,
                "lowAidScore": 100.0,
                "lowDRScore": 99.9
        },
        {
                "rank": 90,
                "country": "Bahrain",
                "priorityScore": 30.1,
                "factorVIII": 8.75,
                "humanitarianAid": 0,
                "drDonations": 0.0,
                "needScore": 0.2,
                "lowAidScore": 100.0,
                "lowDRScore": 100.0
        },
        {
                "rank": 91,
                "country": "Slovakia",
                "priorityScore": 30.1,
                "factorVIII": 9.56,
                "humanitarianAid": 0,
                "drDonations": 0.0,
                "needScore": 0.1,
                "lowAidScore": 100.0,
                "lowDRScore": 99.9
        },
        {
                "rank": 92,
                "country": "Slovenia",
                "priorityScore": 30.1,
                "factorVIII": 9.93,
                "humanitarianAid": 0,
                "drDonations": 0.0,
                "needScore": 0.1,
                "lowAidScore": 100.0,
                "lowDRScore": 99.9
        },
        {
                "rank": 93,
                "country": "Russia",
                "priorityScore": 30.0,
                "factorVIII": 10.15,
                "humanitarianAid": 0,
                "drDonations": 0.0,
                "needScore": 0.1,
                "lowAidScore": 100.0,
                "lowDRScore": 99.9
        },
        {
                "rank": 94,
                "country": "Poland",
                "priorityScore": 30.0,
                "factorVIII": 10.46,
                "humanitarianAid": 0,
                "drDonations": 0.0,
                "needScore": 0.1,
                "lowAidScore": 100.0,
                "lowDRScore": 99.9
        },
        {
                "rank": 95,
                "country": "Lithuania",
                "priorityScore": 30.0,
                "factorVIII": 11.81,
                "humanitarianAid": 0,
                "drDonations": 0.0,
                "needScore": 0.0,
                "lowAidScore": 100.0,
                "lowDRScore": 99.9
        },
        {
                "rank": 96,
                "country": "Hungary",
                "priorityScore": 30.0,
                "factorVIII": 14.95,
                "humanitarianAid": 0,
                "drDonations": 0.0,
                "needScore": 0.0,
                "lowAidScore": 100.0,
                "lowDRScore": 99.9
        },
        {
                "rank": 97,
                "country": "Qatar",
                "priorityScore": 30.0,
                "factorVIII": 14.61,
                "humanitarianAid": 0,
                "drDonations": 0.0,
                "needScore": 0.0,
                "lowAidScore": 100.0,
                "lowDRScore": 99.9
        },
        {
                "rank": 98,
                "country": "United States of America",
                "priorityScore": 29.2,
                "factorVIII": 3.83,
                "humanitarianAid": 0,
                "drDonations": 4282407.36,
                "needScore": 6.8,
                "lowAidScore": 100.0,
                "lowDRScore": 44.2
        },
        {
                "rank": 99,
                "country": "Paraguay",
                "priorityScore": 28.9,
                "factorVIII": 1.86,
                "humanitarianAid": 8127000,
                "drDonations": 23413970.0,
                "needScore": 27.2,
                "lowAidScore": 45.8,
                "lowDRScore": 7.2
        },
        {
                "rank": 100,
                "country": "Albania",
                "priorityScore": 27.1,
                "factorVIII": 3.28,
                "humanitarianAid": 6000000,
                "drDonations": 0.0,
                "needScore": 10.1,
                "lowAidScore": 50.5,
                "lowDRScore": 100.0
        },
        {
                "rank": 101,
                "country": "Argentina",
                "priorityScore": 27.0,
                "factorVIII": 4.34,
                "humanitarianAid": 1336500,
                "drDonations": 0.0,
                "needScore": 4.8,
                "lowAidScore": 68.5,
                "lowDRScore": 100.0
        },
        {
                "rank": 102,
                "country": "Macedonia",
                "priorityScore": 23.4,
                "factorVIII": 4.15,
                "humanitarianAid": 70500,
                "drDonations": 13179120.0,
                "needScore": 5.5,
                "lowAidScore": 87.0,
                "lowDRScore": 21.9
        },
        {
                "rank": 103,
                "country": "Peru",
                "priorityScore": 11.5,
                "factorVIII": 3.64,
                "humanitarianAid": 62562750,
                "drDonations": 1417900.0,
                "needScore": 7.8,
                "lowAidScore": 0.0,
                "lowDRScore": 60.0
        }
];

        // Priority countries data (from uploaded Excel file)
        const priorityCountriesData = [
  {
    "region": "East Asia & Pacific",
    "country": "Fiji",
    "fviii_per_capita": null,
    "humanitarian_aid": null
  },
  {
    "region": "East Asia & Pacific",
    "country": "Kiribati",
    "fviii_per_capita": null,
    "humanitarian_aid": null
  },
  {
    "region": "East Asia & Pacific",
    "country": "Nauru",
    "fviii_per_capita": null,
    "humanitarian_aid": null
  },
  {
    "region": "East Asia & Pacific",
    "country": "North Korea",
    "fviii_per_capita": null,
    "humanitarian_aid": null
  },
  {
    "region": "East Asia & Pacific",
    "country": "Papua New Guinea",
    "fviii_per_capita": null,
    "humanitarian_aid": null
  },
  {
    "region": "East Asia & Pacific",
    "country": "Samoa",
    "fviii_per_capita": null,
    "humanitarian_aid": null
  },
  {
    "region": "East Asia & Pacific",
    "country": "Solomon Islands",
    "fviii_per_capita": null,
    "humanitarian_aid": null
  },
  {
    "region": "East Asia & Pacific",
    "country": "Tonga",
    "fviii_per_capita": null,
    "humanitarian_aid": null
  },
  {
    "region": "East Asia & Pacific",
    "country": "Tuvalu",
    "fviii_per_capita": null,
    "humanitarian_aid": null
  },
  {
    "region": "East Asia & Pacific",
    "country": "Vanuatu",
    "fviii_per_capita": null,
    "humanitarian_aid": null
  },
  {
    "region": "Eastern Europe & Central Asia",
    "country": "Azerbaijan",
    "fviii_per_capita": null,
    "humanitarian_aid": null
  },
  {
    "region": "Eastern Europe & Central Asia",
    "country": "Kazakhstan",
    "fviii_per_capita": null,
    "humanitarian_aid": null
  },
  {
    "region": "Eastern Europe & Central Asia",
    "country": "Kosovo",
    "fviii_per_capita": null,
    "humanitarian_aid": null
  },
  {
    "region": "Eastern Europe & Central Asia",
    "country": "Moldova",
    "fviii_per_capita": null,
    "humanitarian_aid": null
  },
  {
    "region": "Eastern Europe & Central Asia",
    "country": "Tajikistan",
    "fviii_per_capita": null,
    "humanitarian_aid": null
  },
  {
    "region": "Eastern Europe & Central Asia",
    "country": "Turkey",
    "fviii_per_capita": null,
    "humanitarian_aid": null
  },
  {
    "region": "Eastern Europe & Central Asia",
    "country": "Turkmenistan",
    "fviii_per_capita": null,
    "humanitarian_aid": null
  },
  {
    "region": "Eastern Europe & Central Asia",
    "country": "Ukraine",
    "fviii_per_capita": null,
    "humanitarian_aid": null
  },
  {
    "region": "Europe (Other)",
    "country": "Bulgaria",
    "fviii_per_capita": null,
    "humanitarian_aid": null
  },
  {
    "region": "Latin America & Caribbean",
    "country": "Costa Rica",
    "fviii_per_capita": null,
    "humanitarian_aid": null
  },
  {
    "region": "Latin America & Caribbean",
    "country": "Dominica",
    "fviii_per_capita": null,
    "humanitarian_aid": null
  },
  {
    "region": "Latin America & Caribbean",
    "country": "Ecuador",
    "fviii_per_capita": null,
    "humanitarian_aid": null
  },
  {
    "region": "Latin America & Caribbean",
    "country": "Grenada",
    "fviii_per_capita": null,
    "humanitarian_aid": null
  },
  {
    "region": "Latin America & Caribbean",
    "country": "Guatemala",
    "fviii_per_capita": null,
    "humanitarian_aid": null
  },
  {
    "region": "Latin America & Caribbean",
    "country": "Haiti",
    "fviii_per_capita": null,
    "humanitarian_aid": null
  },
  {
    "region": "Latin America & Caribbean",
    "country": "Jamaica",
    "fviii_per_capita": null,
    "humanitarian_aid": null
  },
  {
    "region": "Latin America & Caribbean",
    "country": "Mexico",
    "fviii_per_capita": 2.56,
    "humanitarian_aid": null
  },
  {
    "region": "Latin America & Caribbean",
    "country": "Nicaragua",
    "fviii_per_capita": null,
    "humanitarian_aid": null
  },
  {
    "region": "Latin America & Caribbean",
    "country": "Saint Lucia",
    "fviii_per_capita": null,
    "humanitarian_aid": null
  },
  {
    "region": "Latin America & Caribbean",
    "country": "Saint Vincent and the Grenadines",
    "fviii_per_capita": null,
    "humanitarian_aid": null
  },
  {
    "region": "Latin America & Caribbean",
    "country": "Uruguay",
    "fviii_per_capita": 2.49,
    "humanitarian_aid": null
  },
  {
    "region": "Middle East & North Africa",
    "country": "Iran",
    "fviii_per_capita": null,
    "humanitarian_aid": null
  },
  {
    "region": "Middle East & North Africa",
    "country": "Iraq",
    "fviii_per_capita": 0.88,
    "humanitarian_aid": null
  },
  {
    "region": "Middle East & North Africa",
    "country": "Jordan",
    "fviii_per_capita": 1.31,
    "humanitarian_aid": null
  },
  {
    "region": "Middle East & North Africa",
    "country": "Libya",
    "fviii_per_capita": null,
    "humanitarian_aid": null
  },
  {
    "region": "Middle East & North Africa",
    "country": "Tunisia",
    "fviii_per_capita": 2.03,
    "humanitarian_aid": null
  },
  {
    "region": "Middle East & North Africa",
    "country": "Yemen",
    "fviii_per_capita": null,
    "humanitarian_aid": null
  },
  {
    "region": "South & Southeast Asia",
    "country": "Afghanistan",
    "fviii_per_capita": null,
    "humanitarian_aid": null
  },
  {
    "region": "South & Southeast Asia",
    "country": "Bhutan",
    "fviii_per_capita": null,
    "humanitarian_aid": null
  },
  {
    "region": "South & Southeast Asia",
    "country": "East Timor",
    "fviii_per_capita": null,
    "humanitarian_aid": null
  },
  {
    "region": "South & Southeast Asia",
    "country": "Laos",
    "fviii_per_capita": null,
    "humanitarian_aid": null
  },
  {
    "region": "South & Southeast Asia",
    "country": "Malaysia",
    "fviii_per_capita": 2.16,
    "humanitarian_aid": null
  },
  {
    "region": "South & Southeast Asia",
    "country": "Maldives",
    "fviii_per_capita": null,
    "humanitarian_aid": null
  },
  {
    "region": "South & Southeast Asia",
    "country": "Thailand",
    "fviii_per_capita": null,
    "humanitarian_aid": null
  },
  {
    "region": "Sub-Saharan Africa",
    "country": "Angola",
    "fviii_per_capita": null,
    "humanitarian_aid": null
  },
  {
    "region": "Sub-Saharan Africa",
    "country": "Benin",
    "fviii_per_capita": null,
    "humanitarian_aid": null
  },
  {
    "region": "Sub-Saharan Africa",
    "country": "Burkina Faso",
    "fviii_per_capita": null,
    "humanitarian_aid": null
  },
  {
    "region": "Sub-Saharan Africa",
    "country": "Cape Verde",
    "fviii_per_capita": null,
    "humanitarian_aid": null
  },
  {
    "region": "Sub-Saharan Africa",
    "country": "Central African Republic",
    "fviii_per_capita": null,
    "humanitarian_aid": null
  },
  {
    "region": "Sub-Saharan Africa",
    "country": "Chad",
    "fviii_per_capita": null,
    "humanitarian_aid": null
  },
  {
    "region": "Sub-Saharan Africa",
    "country": "Comoros",
    "fviii_per_capita": null,
    "humanitarian_aid": null
  },
  {
    "region": "Sub-Saharan Africa",
    "country": "Democratic Republic of the Congo",
    "fviii_per_capita": 0.01,
    "humanitarian_aid": null
  },
  {
    "region": "Sub-Saharan Africa",
    "country": "Equatorial Guinea",
    "fviii_per_capita": null,
    "humanitarian_aid": null
  },
  {
    "region": "Sub-Saharan Africa",
    "country": "Gabon",
    "fviii_per_capita": null,
    "humanitarian_aid": null
  },
  {
    "region": "Sub-Saharan Africa",
    "country": "Gambia",
    "fviii_per_capita": 0.11,
    "humanitarian_aid": null
  },
  {
    "region": "Sub-Saharan Africa",
    "country": "Guinea Bissau",
    "fviii_per_capita": null,
    "humanitarian_aid": null
  },
  {
    "region": "Sub-Saharan Africa",
    "country": "Lesotho",
    "fviii_per_capita": 0.24,
    "humanitarian_aid": null
  },
  {
    "region": "Sub-Saharan Africa",
    "country": "Liberia",
    "fviii_per_capita": null,
    "humanitarian_aid": null
  },
  {
    "region": "Sub-Saharan Africa",
    "country": "Mozambique",
    "fviii_per_capita": null,
    "humanitarian_aid": null
  },
  {
    "region": "Sub-Saharan Africa",
    "country": "Namibia",
    "fviii_per_capita": null,
    "humanitarian_aid": null
  },
  {
    "region": "Sub-Saharan Africa",
    "country": "Niger",
    "fviii_per_capita": null,
    "humanitarian_aid": null
  },
  {
    "region": "Sub-Saharan Africa",
    "country": "Republic of Congo",
    "fviii_per_capita": null,
    "humanitarian_aid": null
  },
  {
    "region": "Sub-Saharan Africa",
    "country": "Sao Tome and Principe",
    "fviii_per_capita": null,
    "humanitarian_aid": null
  },
  {
    "region": "Sub-Saharan Africa",
    "country": "Somalia",
    "fviii_per_capita": null,
    "humanitarian_aid": null
  },
  {
    "region": "Sub-Saharan Africa",
    "country": "South Africa",
    "fviii_per_capita": 1.11,
    "humanitarian_aid": null
  },
  {
    "region": "Sub-Saharan Africa",
    "country": "South Sudan",
    "fviii_per_capita": null,
    "humanitarian_aid": null
  },
  {
    "region": "Sub-Saharan Africa",
    "country": "Swaziland",
    "fviii_per_capita": null,
    "humanitarian_aid": null
  },
  {
    "region": "Sub-Saharan Africa",
    "country": "Zimbabwe",
    "fviii_per_capita": null,
    "humanitarian_aid": null
  }
];
        
        let filteredData = globalData;
        let currentView = '3d';
        let sortColumn = 'rank';
        let sortDirection = 'asc';
        
        function initializeDashboard() {
            createSummaryCards();
            createMainChart();
            createDistributionChart();
            createTopCountriesChart();
            createTable();
            createPriorityCountriesTable();
            setupEventListeners();
        }
        
        function createSummaryCards() {
            const veryHigh = globalData.filter(d => d.priorityScore >= 90).length;
            const high = globalData.filter(d => d.priorityScore >= 70 && d.priorityScore < 90).length;
            const totalCountries = globalData.length;
            
            const summaryHTML = `
                <div class="card">
                    <h3>Total Countries & Territories</h3>
                    <div class="number">${totalCountries}</div>
                    <p>In Analysis</p>
                </div>
                <div class="card">
                    <h3>Very High Priority</h3>
                    <div class="number">${veryHigh}</div>
                    <p>Score 90-100</p>
                </div>
                <div class="card">
                    <h3>High Priority</h3>
                    <div class="number">${high}</div>
                    <p>Score 80-90</p>
                </div>
            `;
            
            document.getElementById('summaryCards').innerHTML = summaryHTML;
        }
        
        function getColorByPriority(score) {
            if (score >= 90) return '#8B0000';  // Dark red
            if (score >= 70) return '#FF4500';  // Orange red
            if (score >= 50) return '#DAA520';  // Goldenrod
            return '#228B22';  // Forest green
        }
        
        function getNeedCategory(factorVIII) {
            if (factorVIII <= 0.5) return { category: 'Far Below Min. Survival Threshold (0-0.5)', class: 'need-very-high' };
            if (factorVIII <= 1.0) return { category: 'Below Min. Survival Threshold (0.5-1)', class: 'need-high' };
            if (factorVIII <= 3.0) return { category: 'Low (1-3)', class: 'need-medium' };
            return { category: '> 3', class: 'need-low' };
        }
        
        function createMainChart() {
            // Sort data by priority score (high to low) so low priority (green) circles are drawn first
            // and high priority (red) circles are drawn last, appearing on top
            const data = [...filteredData].sort((a, b) => b.priorityScore - a.priorityScore);
            
            if (currentView === '3d') {
                const trace = {
                    x: data.map(d => d.factorVIII),
                    y: data.map(d => d.humanitarianAid / 1000000),
                    z: data.map(d => d.drDonations / 1000000),
                    mode: 'markers',
                    type: 'scatter3d',
                    text: data.map(d => `${d.country}<br>Priority: ${d.priorityScore.toFixed(1)}<br>Factor VIII: ${d.factorVIII}<br>Aid: ${d.humanitarianAid.toLocaleString()} IU<br>Donations: $${d.drDonations.toLocaleString()}`),
                    hovertemplate: '%{text}<extra></extra>',
                    marker: {
                        size: 8,
                        color: data.map(d => getColorByPriority(d.priorityScore)),
                        opacity: 0.8,
                        line: {
                            color: 'black',
                            width: 1
                        }
                    }
                };
                
                const layout = {
                    scene: {
                        xaxis: { 
                            title: 'Factor VIII Per Capita (Lower = Higher Need)',
                            range: [-0.5, Math.max(...globalData.map(d => d.factorVIII)) * 1.05],
                            zeroline: false,
                            showspikes: false
                        },
                        yaxis: { 
                            title: 'Humanitarian Aid (Millions IU)',
                            range: [-2, Math.max(...globalData.map(d => d.humanitarianAid / 1000000)) * 1.05],
                            zeroline: false,
                            showspikes: false
                        },
                        zaxis: { 
                            title: 'DR Donations (Millions USD)',
                            range: [-2, Math.max(...globalData.map(d => d.drDonations / 1000000)) * 1.05],
                            zeroline: false,
                            showspikes: false
                        },
                        camera: {
                            eye: { x: 1.5, y: 1.5, z: 1.5 }
                        }
                    },
                    margin: { l: 0, r: 0, t: 0, b: 0 }
                };
                
                Plotly.newPlot('mainChart', [trace], layout, {responsive: true});
            } else {
                create2DChart();
            }
        }
        
        function create2DChart() {
            // Sort data by priority score (high to low) so low priority (green) circles are drawn first
            // and high priority (red) circles are drawn last, appearing on top
            const data = [...filteredData].sort((a, b) => b.priorityScore - a.priorityScore);
            let xData, yData, xTitle, yTitle, yAxisType, yAxisRange, xAxisRange;
            
            switch(currentView) {
                case 'need-aid':
                    xData = data.map(d => d.factorVIII);
                    yData = data.map(d => d.humanitarianAid / 1000000);
                    xTitle = 'Factor VIII Per Capita';
                    yTitle = 'Humanitarian Aid (Millions IU)';
                    yAxisType = 'linear';
                    xAxisRange = [-0.5, Math.max(...globalData.map(d => d.factorVIII)) * 1.05];
                    yAxisRange = [-2, Math.max(...globalData.map(d => d.humanitarianAid / 1000000)) * 1.05];
                    break;
                case 'need-dr':
                    xData = data.map(d => d.factorVIII);
                    yData = data.map(d => d.drDonations / 1000000);
                    xTitle = 'Factor VIII Per Capita';
                    yTitle = 'DR Donations (Millions USD)';
                    yAxisType = 'linear';
                    xAxisRange = [-0.5, Math.max(...globalData.map(d => d.factorVIII)) * 1.05];
                    yAxisRange = [-2, 50];
                    break;
                case 'aid-dr':
                    xData = data.map(d => d.humanitarianAid / 1000000);
                    yData = data.map(d => d.drDonations / 1000000);
                    xTitle = 'Humanitarian Aid (Millions IU)';
                    yTitle = 'DR Donations (Millions USD)';
                    yAxisType = 'linear';
                    xAxisRange = [-2, Math.max(...globalData.map(d => d.humanitarianAid / 1000000)) * 1.05];
                    yAxisRange = [-2, 50];
                    break;
            }
            
            const trace = {
                x: xData,
                y: yData,
                mode: 'markers',
                type: 'scatter',
                text: data.map(d => `${d.country}<br>Priority: ${d.priorityScore.toFixed(1)}<br>Factor VIII: ${d.factorVIII}<br>Aid: ${d.humanitarianAid.toLocaleString()} IU<br>Donations: $${d.drDonations.toLocaleString()}`),
                hovertemplate: '%{text}<extra></extra>',
                marker: {
                    size: 10,
                    color: data.map(d => getColorByPriority(d.priorityScore)),
                    opacity: 0.7,
                    line: {
                        color: 'black',
                        width: 1
                    }
                }
            };
            
            const shapes = [];
            if (currentView === 'need-aid' || currentView === 'need-dr') {
                shapes.push(
                    {
                        type: 'line',
                        x0: 0.5, x1: 0.5,
                        y0: yAxisRange[0], y1: yAxisRange[1],
                        line: { color: 'red', width: 2, dash: 'dash' }
                    },
                    {
                        type: 'line',
                        x0: 1, x1: 1,
                        y0: yAxisRange[0], y1: yAxisRange[1],
                        line: { color: 'orange', width: 2, dash: 'dash' }
                    }
                );
            }
            
            const layout = {
                xaxis: { 
                    title: xTitle,
                    range: xAxisRange
                },
                yaxis: { 
                    title: yTitle, 
                    type: yAxisType,
                    range: yAxisRange,
                    dtick: 10
                },
                shapes: shapes,
                margin: { l: 60, r: 20, t: 20, b: 60 }
            };
            
            Plotly.newPlot('mainChart', [trace], layout, {responsive: true});
        }
        
        function createDistributionChart() {
            const priorityRanges = [
                { range: 'Very High (90-100)', min: 90, max: 100, color: '#8B0000' },
                { range: 'High (70-90)', min: 70, max: 90, color: '#FF4500' },
                { range: 'Medium (50-70)', min: 50, max: 70, color: '#DAA520' },
                { range: 'Low (<50)', min: 0, max: 50, color: '#228B22' }
            ];
            
            const counts = priorityRanges.map(p => 
                globalData.filter(d => d.priorityScore >= p.min && d.priorityScore < p.max).length
            );
            
            const trace = {
                x: priorityRanges.map(p => p.range),
                y: counts,
                type: 'bar',
                marker: {
                    color: priorityRanges.map(p => p.color),
                    line: { color: 'black', width: 1 }
                },
                text: counts.map(c => c.toString()),
                textposition: 'outside'
            };
            
            const layout = {
                title: 'Priority Score Distribution',
                xaxis: { title: 'Priority Range' },
                yaxis: { title: 'Number of Countries & Territories' },
                margin: { l: 60, r: 20, t: 40, b: 60 }
            };
            
            Plotly.newPlot('distributionChart', [trace], layout, {responsive: true});
        }
        
        function createTopCountriesChart() {
            const top15 = globalData.slice(0, 15);
            
            const trace = {
                x: top15.map(d => d.priorityScore),
                y: top15.map(d => d.country).reverse(),
                type: 'bar',
                orientation: 'h',
                marker: {
                    color: top15.map(d => getColorByPriority(d.priorityScore)).reverse(),
                    line: { color: 'black', width: 1 }
                },
                text: top15.map(d => d.priorityScore.toString()).reverse(),
                textposition: 'outside'
            };
            
            const layout = {
                title: 'Top 15 Priority Countries & Territories',
                xaxis: { title: 'Priority Score' },
                margin: { l: 150, r: 20, t: 40, b: 60 }
            };
            
            Plotly.newPlot('topCountriesChart', [trace], layout, {responsive: true});
        }
        
        function getPriorityClass(score) {
            if (score >= 90) return 'priority-very-high';
            if (score >= 70) return 'priority-high';
            if (score >= 50) return 'priority-medium';
            return 'priority-low';
        }
        
        function sortData(data, column, direction) {
            return data.sort((a, b) => {
                let aVal = a[column];
                let bVal = b[column];
                
                // Handle null/undefined values
                if (aVal === null || aVal === undefined) aVal = direction === 'asc' ? Infinity : -Infinity;
                if (bVal === null || bVal === undefined) bVal = direction === 'asc' ? Infinity : -Infinity;
                
                if (direction === 'asc') {
                    return aVal > bVal ? 1 : -1;
                } else {
                    return aVal < bVal ? 1 : -1;
                }
            });
        }
        
        function createTable() {
            const tableBody = document.getElementById('tableBody');
            const limit = document.getElementById('tableLimit').value;
            const search = document.getElementById('tableSearch').value.toLowerCase();
            const priorityFilter = document.getElementById('tablePriority').value;
            
            let displayData = [...globalData];
            
            // Apply filters
            if (search) {
                displayData = displayData.filter(d => 
                    d.country.toLowerCase().includes(search)
                );
            }
            
            if (priorityFilter !== 'all') {
                switch(priorityFilter) {
                    case 'very-high':
                        displayData = displayData.filter(d => d.priorityScore >= 90);
                        break;
                    case 'high':
                        displayData = displayData.filter(d => d.priorityScore >= 70 && d.priorityScore < 90);
                        break;
                    case 'medium':
                        displayData = displayData.filter(d => d.priorityScore >= 50 && d.priorityScore < 70);
                        break;
                    case 'low':
                        displayData = displayData.filter(d => d.priorityScore < 50);
                        break;
                }
            }
            
            // Apply sorting
            if (sortColumn) {
                displayData = sortData(displayData, sortColumn, sortDirection);
            }
            
            if (limit !== 'all') {
                displayData = displayData.slice(0, parseInt(limit));
            }
            
            const rows = displayData.map(d => {
                const needCategory = getNeedCategory(d.factorVIII);
                return `
                <tr>
                    <td>${d.rank}</td>
                    <td><strong>${d.country}</strong></td>
                    <td class="priority-score ${getPriorityClass(d.priorityScore)}">${d.priorityScore}</td>
                    <td class="${needCategory.class}">${needCategory.category}</td>
                    <td>${d.factorVIII}</td>
                    <td>${d.humanitarianAid.toLocaleString()}</td>
                    <td>${d.drDonations.toLocaleString()}</td>
                </tr>
            `}).join('');
            
            tableBody.innerHTML = rows;
            
            // Update sort indicators
            document.querySelectorAll('th').forEach(th => {
                th.classList.remove('sort-asc', 'sort-desc');
                if (th.dataset.sort === sortColumn) {
                    th.classList.add(sortDirection === 'asc' ? 'sort-asc' : 'sort-desc');
                }
            });
        }
        
        function createPriorityCountriesTable() {
            const tableBody = document.getElementById('priorityCountriesTableBody');
            const regionFilter = document.getElementById('regionFilter').value;
            const search = document.getElementById('priorityCountriesSearch').value.toLowerCase();
            
            let displayData = priorityCountriesData;
            
            // Apply filters
            if (regionFilter !== 'all') {
                displayData = displayData.filter(d => d.region === regionFilter);
            }
            
            if (search) {
                displayData = displayData.filter(d => 
                    d.country.toLowerCase().includes(search)
                );
            }
            
            const rows = displayData.map(d => `
                <tr>
                    <td>${d.region}</td>
                    <td><strong>${d.country}</strong></td>
                    <td>${d.fviii_per_capita !== null ? d.fviii_per_capita : ''}</td>
                    <td>None recorded</td>
                </tr>
            `).join('');
            
            tableBody.innerHTML = rows;
        }
        
        function filterData() {
            const priorityFilter = document.getElementById('priorityFilter').value;
            const search = document.getElementById('searchCountry').value.toLowerCase();
            
            filteredData = globalData;
            
            if (priorityFilter !== 'all') {
                switch(priorityFilter) {
                    case 'very-high':
                        filteredData = filteredData.filter(d => d.priorityScore >= 90);
                        break;
                    case 'high':
                        filteredData = filteredData.filter(d => d.priorityScore >= 70 && d.priorityScore < 90);
                        break;
                    case 'medium':
                        filteredData = filteredData.filter(d => d.priorityScore >= 50 && d.priorityScore < 70);
                        break;
                    case 'low':
                        filteredData = filteredData.filter(d => d.priorityScore < 50);
                        break;
                }
            }
            
            if (search) {
                filteredData = filteredData.filter(d => 
                    d.country.toLowerCase().includes(search)
                );
            }
            
            createMainChart();
        }
        
        function downloadCSV(filename, data) {
            const csv = data.join('\n');
            const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            link.setAttribute('href', url);
            link.setAttribute('download', filename);
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }
        
        function downloadMainTableCSV() {
            const limit = document.getElementById('tableLimit').value;
            const search = document.getElementById('tableSearch').value.toLowerCase();
            const priorityFilter = document.getElementById('tablePriority').value;
            
            let displayData = [...globalData];
            
            // Apply filters
            if (search) {
                displayData = displayData.filter(d => 
                    d.country.toLowerCase().includes(search)
                );
            }
            
            if (priorityFilter !== 'all') {
                switch(priorityFilter) {
                    case 'very-high':
                        displayData = displayData.filter(d => d.priorityScore >= 90);
                        break;
                    case 'high':
                        displayData = displayData.filter(d => d.priorityScore >= 70 && d.priorityScore < 90);
                        break;
                    case 'medium':
                        displayData = displayData.filter(d => d.priorityScore >= 50 && d.priorityScore < 70);
                        break;
                    case 'low':
                        displayData = displayData.filter(d => d.priorityScore < 50);
                        break;
                }
            }
            
            // Apply sorting
            if (sortColumn) {
                displayData = sortData(displayData, sortColumn, sortDirection);
            }
            
            if (limit !== 'all') {
                displayData = displayData.slice(0, parseInt(limit));
            }
            
            // Create CSV
            const csvData = [
                ['Rank', 'Country/Territory', 'Priority Score', 'Factor VIII Per Capita', 'Humanitarian Aid (IU)', 'DR Donations (USD)']
            ];
            
            displayData.forEach(d => {
                csvData.push([
                    d.rank,
                    d.country,
                    d.priorityScore,
                    d.factorVIII,
                    d.humanitarianAid,
                    d.drDonations
                ]);
            });
            
            downloadCSV('hemophilia_priority_rankings.csv', csvData.map(row => row.join(',')));
        }
        
        function downloadPriorityCountriesCSV() {
            const regionFilter = document.getElementById('regionFilter').value;
            const search = document.getElementById('priorityCountriesSearch').value.toLowerCase();
            
            let displayData = priorityCountriesData;
            
            // Apply filters
            if (regionFilter !== 'all') {
                displayData = displayData.filter(d => d.region === regionFilter);
            }
            
            if (search) {
                displayData = displayData.filter(d => 
                    d.country.toLowerCase().includes(search)
                );
            }
            
            // Create CSV
            const csvData = [
                ['Region', 'Country', 'FVIII Per Capita', 'Humanitarian Aid Status']
            ];
            
            displayData.forEach(d => {
                csvData.push([
                    d.region,
                    d.country,
                    d.fviii_per_capita !== null ? d.fviii_per_capita : '',
                    'None recorded'
                ]);
            });
            
            downloadCSV('countries_not_receiving_wfh_support.csv', csvData.map(row => row.join(',')));
        }
        
        function setupEventListeners() {
            document.getElementById('viewSelect').addEventListener('change', (e) => {
                currentView = e.target.value;
                createMainChart();
            });
            
            document.getElementById('priorityFilter').addEventListener('change', filterData);
            document.getElementById('searchCountry').addEventListener('input', filterData);
            
            // Table controls
            document.getElementById('tableSearch').addEventListener('input', createTable);
            document.getElementById('tableLimit').addEventListener('change', createTable);
            document.getElementById('tablePriority').addEventListener('change', createTable);
            
            // Priority countries table controls
            document.getElementById('regionFilter').addEventListener('change', createPriorityCountriesTable);
            document.getElementById('priorityCountriesSearch').addEventListener('input', createPriorityCountriesTable);
            
            // CSV download buttons
            document.getElementById('downloadMainTableCSV').addEventListener('click', downloadMainTableCSV);
            document.getElementById('downloadPriorityCountriesCSV').addEventListener('click', downloadPriorityCountriesCSV);
            
            // Table sorting
            document.querySelectorAll('th[data-sort]').forEach(th => {
                th.addEventListener('click', () => {
                    const newSortColumn = th.dataset.sort;
                    if (sortColumn === newSortColumn) {
                        sortDirection = sortDirection === 'asc' ? 'desc' : 'asc';
                    } else {
                        sortColumn = newSortColumn;
                        sortDirection = 'asc';
                    }
                    createTable();
                });
            });
        }
        
        // Initialize dashboard when page loads
        document.addEventListener('DOMContentLoaded', initializeDashboard);
    </script>
</body>
</html>
